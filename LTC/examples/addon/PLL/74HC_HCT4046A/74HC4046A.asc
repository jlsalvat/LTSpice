Version 4
SHEET 1 4564 1120
WIRE 80 -672 48 -672
WIRE 208 -672 208 -704
WIRE 208 -672 160 -672
WIRE 272 -672 272 -704
WIRE 320 -672 272 -672
WIRE 432 -672 400 -672
WIRE 176 -656 48 -656
WIRE 304 -656 176 -656
WIRE 48 -640 48 -656
WIRE 176 -640 176 -656
WIRE 208 -640 208 -672
WIRE 272 -640 272 -672
WIRE 304 -640 304 -656
WIRE 704 -640 416 -640
WIRE -48 -624 -48 -704
WIRE -48 -624 -64 -624
WIRE 416 -624 416 -640
WIRE 416 -608 400 -608
WIRE 208 -560 208 -576
WIRE 256 -560 208 -560
WIRE 336 -560 336 -608
WIRE 336 -560 256 -560
WIRE 416 -560 336 -560
WIRE 480 -560 480 -576
WIRE 512 -560 512 -576
WIRE 512 -560 480 -560
WIRE 576 -560 512 -560
WIRE 720 -560 672 -560
WIRE -48 -544 -48 -624
WIRE 48 -544 48 -576
WIRE 48 -544 -48 -544
WIRE 272 -544 272 -576
WIRE 336 -544 272 -544
WIRE 416 -544 336 -544
WIRE 704 -528 704 -640
WIRE 1056 -528 704 -528
WIRE 480 -512 480 -528
WIRE 512 -512 480 -512
WIRE 576 -512 512 -512
WIRE 704 -512 704 -528
WIRE 704 -512 688 -512
WIRE 336 -496 336 -544
WIRE 416 -496 400 -496
WIRE 512 -496 512 -512
WIRE 416 -464 416 -480
WIRE 720 -464 720 -560
WIRE 720 -464 416 -464
WIRE 256 -432 256 -560
WIRE 368 -432 256 -432
WIRE 464 -432 432 -432
WIRE 656 -432 464 -432
WIRE 1056 -432 720 -432
WIRE -304 -416 -336 -416
WIRE -384 -400 -528 -400
WIRE 272 -400 272 -544
WIRE 320 -400 272 -400
WIRE 464 -400 384 -400
WIRE 656 -400 464 -400
WIRE -480 -352 -528 -352
WIRE -384 -352 -400 -352
WIRE 976 -352 960 -352
WIRE 272 -336 272 -400
WIRE 544 -336 272 -336
WIRE -352 -320 -384 -352
WIRE -304 -320 -304 -416
WIRE -304 -320 -352 -320
WIRE 544 -320 544 -336
WIRE 592 -320 544 -320
WIRE 976 -320 976 -352
WIRE -96 -304 -112 -304
WIRE 0 -304 -16 -304
WIRE 16 -304 0 -304
WIRE 112 -304 96 -304
WIRE 0 -288 0 -304
WIRE 320 -272 304 -272
WIRE 512 -272 480 -272
WIRE 592 -272 576 -272
WIRE 784 -272 752 -272
WIRE 864 -256 848 -256
WIRE 928 -256 864 -256
WIRE 272 -224 272 -336
WIRE 320 -224 272 -224
WIRE 576 -208 576 -272
WIRE 784 -208 576 -208
WIRE 976 -208 976 -240
WIRE 1056 -208 976 -208
WIRE 0 -192 0 -208
WIRE 0 -192 -144 -192
WIRE 144 -192 0 -192
WIRE -304 -176 -336 -176
WIRE -144 -176 -144 -192
WIRE 144 -176 144 -192
WIRE 512 -176 512 -256
WIRE 592 -176 512 -176
WIRE 864 -176 864 -256
WIRE 896 -176 864 -176
WIRE -384 -160 -528 -160
WIRE 304 -144 304 -272
WIRE 400 -144 400 -176
WIRE 496 -144 400 -144
WIRE 576 -144 576 -208
WIRE 576 -144 560 -144
WIRE 896 -144 864 -144
WIRE 1056 -144 960 -144
WIRE 400 -128 400 -144
WIRE 592 -128 592 -176
WIRE 592 -128 560 -128
WIRE 608 -128 592 -128
WIRE 688 -128 672 -128
WIRE -480 -112 -528 -112
WIRE -384 -112 -400 -112
WIRE 576 -112 560 -112
WIRE 576 -96 576 -112
WIRE 784 -96 576 -96
WIRE 976 -96 976 -208
WIRE -352 -80 -384 -112
WIRE -304 -80 -304 -176
WIRE -304 -80 -352 -80
WIRE -144 -80 -144 -96
WIRE -80 -80 -144 -80
WIRE -32 -80 -80 -80
WIRE 80 -80 32 -80
WIRE 144 -80 144 -96
WIRE 144 -80 80 -80
WIRE 256 -80 256 -432
WIRE 320 -80 256 -80
WIRE 864 -80 864 -144
WIRE 864 -80 848 -80
WIRE 928 -80 864 -80
WIRE -96 -64 -144 -80
WIRE 96 -64 144 -80
WIRE -144 -48 -144 -80
WIRE 144 -48 144 -80
WIRE 304 -32 304 -144
WIRE 320 -32 304 -32
WIRE 576 -32 576 -96
WIRE 576 -32 480 -32
WIRE 592 -32 576 -32
WIRE 784 -32 752 -32
WIRE -80 -16 -80 -80
WIRE 0 -16 -16 -16
WIRE 16 -16 0 -16
WIRE 80 -16 80 -80
WIRE 592 16 544 16
WIRE -192 32 -192 16
WIRE -144 32 -192 32
WIRE 0 32 0 -16
WIRE 0 32 -144 32
WIRE 144 32 0 32
WIRE 192 32 192 16
WIRE 192 32 144 32
WIRE 256 32 256 -80
WIRE 544 32 544 16
WIRE 544 32 256 32
WIRE 0 48 0 32
WIRE -304 64 -336 64
WIRE -384 80 -416 80
WIRE 464 112 416 112
WIRE 768 112 464 112
WIRE 1056 112 832 112
WIRE -384 128 -528 128
WIRE 416 128 416 112
WIRE 688 144 640 144
WIRE 768 144 752 144
WIRE -352 160 -384 128
WIRE -304 160 -304 64
WIRE -304 160 -352 160
WIRE 464 208 464 192
WIRE -272 288 -272 224
WIRE -96 288 -96 -64
WIRE 96 288 96 -64
FLAG -96 288 6-C1
IOPIN -96 288 BiDir
FLAG 96 288 7-C1
IOPIN 96 288 BiDir
FLAG -192 -160 7-C1
FLAG 192 -32 7-C1
FLAG -192 -32 6-C1
FLAG 192 -160 6-C1
FLAG 1056 112 4-vco
IOPIN 1056 112 Out
FLAG -528 -352 R1-11
IOPIN -528 -352 Out
FLAG -528 -160 VCC-16
IOPIN -528 -160 In
FLAG -528 -112 R2-12
IOPIN -528 -112 Out
FLAG 272 -704 14-Sig
IOPIN 272 -704 In
FLAG 208 -704 3-cmp
IOPIN 208 -704 In
FLAG -528 -400 9-vco-in
IOPIN -528 -400 In
FLAG -416 80 9-vco-in
FLAG -528 128 dm-10
IOPIN -528 128 Out
FLAG -336 -336 COM
FLAG -304 -240 COM
FLAG -336 -96 COM
FLAG -304 0 COM
FLAG -336 144 COM
FLAG -304 240 COM
FLAG -112 -304 COM
FLAG 112 -304 COM
FLAG 192 -112 COM
FLAG -192 -112 COM
FLAG 0 48 COM
FLAG 416 208 COM
FLAG 464 208 COM
FLAG -272 224 COM
FLAG -272 288 G-8
IOPIN -272 288 BiDir
FLAG 464 -432 fref
FLAG 464 -400 fcmp
FLAG 1056 -432 XOR-2
IOPIN 1056 -432 Out
FLAG 1056 -528 SR-15
IOPIN 1056 -528 Out
FLAG 1056 -144 PCP
IOPIN 1056 -144 Out
FLAG -48 -704 INH
IOPIN -48 -704 In
FLAG 512 -576 S
FLAG 512 -496 R
FLAG -144 -624 VCC-16
FLAG 32 -624 COM
FLAG 304 -144 VCC-16
FLAG 928 -32 COM
FLAG 928 -304 COM
FLAG 1056 -208 PFDII-13
IOPIN 1056 -208 Out
FLAG 976 -16 COM
FLAG 960 -352 VCC-16
FLAG 640 144 INH
FLAG 688 -128 INH
FLAG 432 -672 COM
FLAG 48 -672 COM
FLAG 128 240 COM
FLAG -240 240 COM
FLAG -160 240 COM
FLAG -16 240 COM
FLAG 224 240 COM
FLAG -240 160 SR-15
FLAG -160 160 XOR-2
FLAG -16 160 PFDII-13
FLAG 128 160 PCP
FLAG 224 160 4-vco
SYMBOL sw -144 -80 M180
SYMATTR InstName S1
SYMBOL sw 144 48 R180
SYMATTR InstName S2
SYMBOL sw 144 -80 R180
SYMATTR InstName S3
SYMBOL sw -144 48 M180
SYMATTR InstName S4
SYMBOL cap 32 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 20p
SYMBOL bi2 -16 -304 M270
WINDOW 3 -40 80 VBottom 2
WINDOW 0 32 40 VTop 2
SYMATTR Value I=I(R1)*6.7
SYMATTR InstName B1
SYMBOL bv 416 112 M0
WINDOW 3 24 44 Invisible 2
SYMATTR Value V=U( I(C1) )*{Vhigh1}
SYMATTR InstName B2
SYMATTR Value2 Tripdt=1n
SYMBOL res 448 96 R0
SYMATTR InstName R3
SYMATTR Value 1G
SYMBOL res -288 -336 M0
SYMATTR InstName R_by-pass-1
SYMATTR Value 2.7k
SYMBOL res -288 -96 M0
SYMATTR InstName R_by-pass-2
SYMATTR Value 2.7k
SYMBOL bi2 16 -304 M90
WINDOW 3 27 120 VTop 2
WINDOW 0 -32 40 VBottom 2
SYMATTR Value I=I(R2)*7
SYMATTR InstName B3
SYMBOL res -288 144 M0
SYMATTR InstName R_by-pass-3
SYMATTR Value 2.7k
SYMBOL g -336 48 R0
WINDOW 3 -475 544 Invisible 2
WINDOW 0 -25 14 Left 2
SYMATTR Value 1
SYMATTR InstName G3
SYMBOL res -384 -368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1n
SYMBOL res -384 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1n
SYMBOL Digital\\buf1 368 -496 R0
WINDOW 3 8 60 Invisible 2
WINDOW 0 -4 62 Left 2
SYMATTR Value Td={Td1*4}
SYMATTR InstName A2
SYMATTR Value2 Vhigh={Vhigh1}
SYMBOL Digital\\buf1 320 -464 R0
WINDOW 3 8 60 Invisible 2
WINDOW 0 2 59 Left 2
SYMATTR Value Td={Td1*.1}
SYMATTR InstName A3
SYMATTR Value2 Vhigh={Vhigh1}
SYMBOL Digital\\xor 704 -480 R0
WINDOW 3 16 112 Invisible 2
WINDOW 0 -16 64 Left 2
SYMATTR Value Vhigh={Vhigh1}
SYMATTR InstName A4
SYMATTR Value2 Td={td1} ref={ref1}
SYMBOL Digital\\and 448 -528 M180
WINDOW 0 -25 73 Left 2
WINDOW 3 16 112 Invisible 2
SYMATTR InstName A6
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\and 448 -576 R0
WINDOW 0 -26 68 Left 2
WINDOW 3 16 112 Invisible 2
SYMATTR InstName A7
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\inv 336 -544 M180
WINDOW 3 8 104 Invisible 2
WINDOW 0 4 64 Left 2
SYMATTR Value Td={td1/10} ref={ref1}
SYMATTR InstName A8
SYMATTR Value2 Vhigh={Vhigh1}
SYMBOL Digital\\inv 336 -560 R0
WINDOW 3 8 104 Invisible 2
WINDOW 0 3 61 Left 2
SYMATTR Value Td={td1/10} ref={ref1}
SYMATTR InstName A9
SYMATTR Value2 Vhigh={Vhigh1}
SYMBOL Digital\\srflop 624 -608 R0
WINDOW 3 -40 28 Left 2
WINDOW 0 -19 70 Left 2
SYMATTR Value IC=0
SYMATTR InstName A10
SYMATTR Value2 Vhigh={Vhigh1}
SYMATTR SpiceLine Td={td1} ref={ref1}
SYMBOL Digital\\and 256 -608 R90
WINDOW 0 -6 42 VRight 2
WINDOW 3 16 112 Invisible 2
SYMATTR InstName A5
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\and 224 -608 M90
WINDOW 0 -12 82 VLeft 2
WINDOW 3 16 112 Invisible 2
SYMATTR InstName A11
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\inv -16 -576 R270
WINDOW 3 8 104 Invisible 2
WINDOW 0 17 46 VRight 2
SYMATTR Value Td={td1/10} ref={ref1}
SYMATTR InstName A12
SYMATTR Value2 Vhigh={Vhigh1}
SYMBOL res -64 -608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res -160 -608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL Digital\\dflop 400 -320 R0
WINDOW 3 8 168 Invisible 2
WINDOW 0 -13 65 Left 2
SYMATTR Value Td={Td1}
SYMATTR InstName A13
SYMATTR Value2 Vhigh={Vhigh1} ref={ref1}
SYMBOL Digital\\dflop 400 16 M180
WINDOW 3 8 168 Invisible 2
WINDOW 0 -16 65 Left 2
SYMATTR Value Td={Td1}
SYMATTR InstName A14
SYMATTR Value2 Vhigh={Vhigh1} ref={ref1}
SYMBOL Digital\\dflop 672 -224 M180
WINDOW 3 8 168 Invisible 2
WINDOW 0 -13 69 Left 2
SYMATTR Value Td={Td1}
SYMATTR InstName A15
SYMATTR Value2 Vhigh={Vhigh1} ref={ref1}
SYMBOL Digital\\dflop 672 -80 R0
WINDOW 3 8 168 Invisible 2
WINDOW 0 -19 62 Left 2
SYMATTR Value Td={Td1}
SYMATTR InstName A16
SYMATTR Value2 Vhigh={Vhigh1} ref={ref1}
SYMBOL Digital\\and 528 -192 M0
WINDOW 0 -26 68 Left 2
WINDOW 3 16 112 Invisible 2
SYMATTR InstName A17
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\or 816 -304 R0
WINDOW 0 -21 62 Left 2
WINDOW 3 -8 36 Invisible 2
SYMATTR InstName A18
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\or 816 -128 R0
WINDOW 0 -23 66 Left 2
WINDOW 3 -8 36 Invisible 2
SYMATTR InstName A19
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL sw 976 -336 R0
WINDOW 0 -14 52 Left 2
SYMATTR InstName S5
SYMATTR Value CHP
SYMBOL sw 976 0 M180
WINDOW 0 -12 60 Left 2
SYMATTR InstName S6
SYMATTR Value CHP
SYMBOL Digital\\or 928 -224 R0
WINDOW 0 -21 62 Left 2
WINDOW 3 -8 36 Invisible 2
SYMATTR InstName A1
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\inv 688 80 R0
WINDOW 3 8 104 Invisible 2
WINDOW 0 -3 66 Left 2
SYMATTR Value Td={td1/10} ref={ref1}
SYMATTR InstName A21
SYMATTR Value2 Vhigh={Vhigh1}
SYMBOL Digital\\and 800 64 R0
WINDOW 0 -26 68 Left 2
WINDOW 3 16 112 Invisible 2
SYMATTR InstName A22
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\and 544 -224 M180
WINDOW 0 -26 68 Left 2
WINDOW 3 16 112 Invisible 2
SYMATTR InstName A20
SYMATTR Value Vhigh={Vhigh1}
SYMATTR Value2 ref={ref1}
SYMBOL Digital\\inv 672 -192 M0
WINDOW 3 8 104 Invisible 2
WINDOW 0 -3 66 Left 2
SYMATTR Value Td={td1/10} ref={ref1}
SYMATTR InstName A23
SYMATTR Value2 Vhigh={Vhigh1}
SYMBOL res 304 -656 R270
WINDOW 0 -25 92 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 1G
SYMBOL res 176 -688 R90
WINDOW 0 64 76 VBottom 2
WINDOW 3 40 42 VTop 2
SYMATTR InstName R5
SYMATTR Value 1G
SYMBOL res 112 144 R0
SYMATTR InstName R8
SYMATTR Value 1G
SYMBOL res -256 144 R0
SYMATTR InstName R9
SYMATTR Value 1G
SYMBOL res -176 144 R0
SYMATTR InstName R10
SYMATTR Value 1G
SYMBOL res -32 144 R0
SYMATTR InstName R11
SYMATTR Value 1G
SYMBOL res 208 144 R0
SYMATTR InstName R12
SYMATTR Value 1G
SYMBOL e -336 -432 R0
WINDOW 0 -11 57 Left 2
WINDOW 3 49 58 Left 2
SYMATTR InstName E1
SYMATTR Value 100
SYMBOL e -336 -192 R0
WINDOW 0 -11 57 Left 2
WINDOW 3 49 58 Left 2
SYMATTR InstName E2
SYMATTR Value 10
SYMBOL res -16 -304 R0
SYMATTR InstName R13
SYMATTR Value 0.001
SYMBOL diode -16 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value IDEAL
SYMBOL diode 16 -32 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value IDEAL
TEXT -496 -504 Left 2 !.ic V(6-C1)=0.5\n.params: Vhigh1=5 ref1=2.5 Td1=50n\n.model SW SW(Ron=5 Roff=1Meg Vt=500m Vh=600m)
TEXT -664 -432 Left 2 ;9 --- VCO_in
TEXT 608 88 Left 2 ;4 --VCO_out
TEXT -584 -200 Left 2 ;VCC
TEXT -632 96 Left 2 ;DEM_OUT
TEXT -440 392 Left 2 ;author Paksutov Konstantin, Ulyanovsk State University, aka Pogankin@yahoo.com, Vanderber@gmail.com
TEXT -24 -488 Left 2 ;I=I(R1)*36 I=I(R2)*90
TEXT 712 -680 Left 2 ;IF no Sig VCO forced to Fmax if\ndrived by PCIII (see datasheet \nMC74HC4046A http://onsemi.com)\nDue this if V(sig)=0, then V(pcIII)=5v
TEXT 512 192 Left 2 ;V=ddt(V(6-C1,7-C1))>0 ? 5 : 0
TEXT 520 232 Left 2 ;V=sgn( I(C1) )>0 ? 0 : 5
TEXT -496 -568 Left 2 !;need to be udjusted\n.model CHP sw(ron=300 roff=300k Vt=0.5)
TEXT 768 232 Left 2 ;V=U( I(C1) )*{Vhigh1}
TEXT -1064 -264 Left 2 !.MODEL IDEAL D(Ron=0 Roff=20meg Vfwd=0.7)
LINE Normal 240 64 240 -432 2
LINE Normal 1024 64 240 64 2
LINE Normal 1024 240 1024 64 2
LINE Normal -256 240 1024 240 2
LINE Normal -256 -432 -256 240 2
LINE Normal 240 -432 -256 -432 2
RECTANGLE Normal 1040 -688 -512 272
